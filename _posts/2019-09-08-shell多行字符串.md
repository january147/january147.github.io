---
tags:
 - Linux
 - Bash
---

&emsp;&emsp;使用shell脚本时，我们有时候需要把多行字符串保存到变量里输出，比如用shell脚本自动生成shell脚本的时候。要实现输出多行字符串，本文对常用的两种方法进行了阐述。

# 用双引号包围跨行字符串

该方法简单直接，但是需要手动给双引号转义(使用反斜线)才能保留双引号。

该方法中`$`开头的变量会被替换，如果不想被替换需要转义`$`字符。

该方法的字符串中`` `<命令语句>` ``(反单引号)包围的内容会被替换成执行结果，如果需要在多行字符串中保留获取命令执行结果的bash语句可以使用另一种形式`$(<命令语句>)`，记得要转义`$`字符。

！！！使用echo输入多行字符串变量时记得用`""`包围该变量，否则所有的换行符号和缩进符号将被省略。

示例

```bash
test_var=hello
a="if [ -d \"$test_var\" ]; then
    dir=\"$test_var\"
    for script in \$(ls \$dir)
    do
        if [ -x \"\$dir/\$script\" ]; then
            \$dir/\$script
        fi
    done
fi
# code generated by January's script"

echo "$a"
```
输入结果为
```bash
if [ -d "hello" ]; then
    dir="hello"
    for script in $(ls $dir)
    do
        if [ -x "$dir/$script" ]; then
            $dir/$script
        fi
    done
fi
# code generated by January's script
```
# 使用cat命令和heredoc

heredoc用于在控制台或者shell文件中作为标准输入内容输入给某些命令，其格式如下

```bash
# <<表示标准输入重定向
<< eof
<多行字符串>
eof
# 多行字符串会被作为标准输入输入给指定命令，其中eof也可以是其他任何字符串，用来其判断开始和结束位置的作用，结尾的eof前后都不能有任何字符
```

cat会将其标准输入接收的数据输入，所以我们只需要将heredoc内容输入给cat然后利用`$()`将cat输入的内容传给变量即可

该方法不需要对引号转义就能保留引号

使用该方法时$开头的变量仍然会被替换为值，所以需要保留变量名的地方记得对$转义

示例

```bash
test_dir=test
script=$(cat << eof
if [ -d "$test_dir" ]; then
    dir="test_dir"
    for script in \$(ls \$dir)
    do
        if [ -x "\$dir/\$script" ]; then
            \$dir/\$script
        fi
    done
fi
# code generated by January's script
eof
)
echo "$script"
```

输出结果

```bash
if [ -d "test" ]; then
    dir="test_dir"
    for script in $(ls $dir)
    do
        if [ -x "$dir/$script" ]; then
            $dir/$script
        fi
    done
fi
# code generated by January's script

```

# 注意

使用echo输入多行字符串变量时记得用`""`包围该变量，否则所有的换行符号和缩进符号将被省略